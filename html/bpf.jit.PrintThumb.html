
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module PrintThumb</title>
<meta name="description" content="Documentation of Coq module PrintThumb" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module PrintThumb</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html">Integers</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.AST.html">AST</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.cfrontend.Ctypes.html">Ctypes</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert.arm</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html">AsmSyntax</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html">BinSyntax</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith.html">ZArith</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.Ascii.html">Ascii</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">String</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.HexString.html">HexString</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Import</span> <span class="id">ListNotations</span>.<br/>
<br/>
<div class="doc">This module is used to print arm32 instructions </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="string_of_int_unsigned">string_of_int_unsigned</a></span> (<span class="id">i</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#int">int</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.HexString.html#of_Z">of_Z</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">i</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="string_of_ireg">string_of_ireg</a></span> (<span class="id">r</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#ireg">ireg</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">r</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR0">IR0</a></span> =&gt; "<span class="id">r0</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR1">IR1</a></span> =&gt; "<span class="id">r1</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR2">IR2</a></span> =&gt; "<span class="id">r2</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR3">IR3</a></span> =&gt; "<span class="id">r3</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR4">IR4</a></span> =&gt; "<span class="id">r4</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR5">IR5</a></span> =&gt; "<span class="id">r5</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR6">IR6</a></span> =&gt; "<span class="id">r6</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR7">IR7</a></span> =&gt; "<span class="id">r7</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR8">IR8</a></span> =&gt; "<span class="id">r8</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR9">IR9</a></span> =&gt; "<span class="id">r9</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR10">IR10</a></span> =&gt; "<span class="id">r10</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR11">IR11</a></span> =&gt; "<span class="id">r11</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR12">IR12</a></span> =&gt; "<span class="id">r12</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR13">IR13</a></span> =&gt; "<span class="id">sp</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR14">IR14</a></span> =&gt; "<span class="id">lr</span>"<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="string_of_ptrofs_signed">string_of_ptrofs_signed</a></span> (<span class="id">ofs</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#ptrofs">ptrofs</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.HexString.html#of_Z">of_Z</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Ptrofs.signed">Ptrofs.signed</a></span> <span class="id">ofs</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="string_of_shift_op">string_of_shift_op</a></span> (<span class="id">sop</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#shift_op">shift_op</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">sop</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#SOimm">SOimm</a></span> <span class="id">i</span> =&gt; "#" ++ <span class="id"><a href="bpf.jit.PrintThumb.html#string_of_int_unsigned">string_of_int_unsigned</a></span> <span class="id">i</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#SOreg">SOreg</a></span> <span class="id">r</span> =&gt; <span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">r</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; "<span class="id">shift</span> <span class="id">op</span> <span class="id">error</span>: <span class="id">not</span> <span class="id">now</span>"<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="string_of_testcond">string_of_testcond</a></span> (<span class="id">cd</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#testcond">testcond</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">cd</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#TCeq">TCeq</a></span> =&gt; "<span class="id">eq</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#TCne">TCne</a></span> =&gt; "<span class="id">ne</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#TChs">TChs</a></span> =&gt; "<span class="id">cs</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#TClo">TClo</a></span> =&gt; "<span class="id">cc</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#TCmi">TCmi</a></span> =&gt; "<span class="id">mi</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#TCpl">TCpl</a></span> =&gt; "<span class="id">pl</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#TChi">TChi</a></span> =&gt; "<span class="id">hi</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#TCls">TCls</a></span> =&gt; "<span class="id">ls</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#TCge">TCge</a></span> =&gt; "<span class="id">ge</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#TClt">TClt</a></span> =&gt; "<span class="id">lt</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#TCgt">TCgt</a></span> =&gt; "<span class="id">gt</span>"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#TCle">TCle</a></span> =&gt; "<span class="id">le</span>"<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="print_arm32_instruction">print_arm32_instruction</a></span> (<span class="id">ins</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#instruction">instruction</a></span>) (<span class="id">pc</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#int">int</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">ins</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Padd">Padd</a></span> <span class="id">dst</span> <span class="id">src</span> <span class="id">sop</span> =&gt; "<span class="id">add</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">src</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_shift_op">string_of_shift_op</a></span> <span class="id">sop</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Pand">Pand</a></span> <span class="id">dst</span> <span class="id">src</span> <span class="id">sop</span> =&gt; "<span class="id">and.w</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">src</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_shift_op">string_of_shift_op</a></span> <span class="id">sop</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Pasr">Pasr</a></span> <span class="id">dst</span> <span class="id">src</span> <span class="id">rop</span> =&gt; "<span class="id">asr</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">src</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">rop</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Pbc">Pbc</a></span> <span class="id">cond</span> <span class="id">imm24</span>   =&gt; "<span class="id">b</span>." ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_testcond">string_of_testcond</a></span> <span class="id">cond</span>) ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ptrofs_signed">string_of_ptrofs_signed</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Ptrofs.mul">Ptrofs.mul</a></span> <span class="id">imm24</span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> 2)) (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> 4)) (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Ptrofs.of_int">Ptrofs.of_int</a></span> <span class="id">pc</span>)))<br/>
<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Pbreg">Pbreg</a></span> <span class="id">dst</span>        =&gt; "<span class="id">bx</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Pcmp">Pcmp</a></span> <span class="id">dst</span> <span class="id">sop</span>     =&gt; "<span class="id">cmp.w</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_shift_op">string_of_shift_op</a></span> <span class="id">sop</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Peor">Peor</a></span> <span class="id">dst</span> <span class="id">src</span> <span class="id">sop</span> =&gt; "<span class="id">eor</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">src</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_shift_op">string_of_shift_op</a></span> <span class="id">sop</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Pldr">Pldr</a></span> <span class="id">dst</span> <span class="id">src</span> <span class="id">sop</span> =&gt; "<span class="id">ldr.w</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", [" ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">src</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_shift_op">string_of_shift_op</a></span> <span class="id">sop</span>) ++ "]"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Pldr_a">Pldr_a</a></span> <span class="id">dst</span> <span class="id">src</span> <span class="id">sop</span> =&gt; "<span class="id">ldr.w_stk</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", [" ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">src</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_shift_op">string_of_shift_op</a></span> <span class="id">sop</span>) ++ "]"<br/>
<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Plsl">Plsl</a></span> <span class="id">dst</span> <span class="id">src</span> <span class="id">rop</span> =&gt; "<span class="id">lsl.w</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">src</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">rop</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Plsr">Plsr</a></span> <span class="id">dst</span> <span class="id">src</span> <span class="id">rop</span> =&gt; "<span class="id">lsr.w</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">src</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">rop</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Pmov">Pmov</a></span>  <span class="id">dst</span> <span class="id">sop</span>    =&gt; "<span class="id">mov</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_shift_op">string_of_shift_op</a></span> <span class="id">sop</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Pmovw">Pmovw</a></span> <span class="id">dst</span> <span class="id">imm16</span>  =&gt; "<span class="id">movw</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", #" ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_int_unsigned">string_of_int_unsigned</a></span> <span class="id">imm16</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Pmovt">Pmovt</a></span> <span class="id">dst</span> <span class="id">imm16</span>  =&gt; "<span class="id">movt</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", #" ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_int_unsigned">string_of_int_unsigned</a></span> <span class="id">imm16</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Porr">Porr</a></span> <span class="id">dst</span> <span class="id">src</span> <span class="id">sop</span> =&gt; "<span class="id">orr.w</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">src</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_shift_op">string_of_shift_op</a></span> <span class="id">sop</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Prsb">Prsb</a></span> <span class="id">dst</span> <span class="id">src</span> <span class="id">sop</span> =&gt; "<span class="id">rsb.w</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_shift_op">string_of_shift_op</a></span> <span class="id">sop</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">src</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Psub">Psub</a></span> <span class="id">dst</span> <span class="id">src</span> <span class="id">sop</span> =&gt; "<span class="id">sub.w</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">src</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_shift_op">string_of_shift_op</a></span> <span class="id">sop</span>)<br/>
<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Pstr">Pstr</a></span> <span class="id">dst</span> <span class="id">src</span> <span class="id">sop</span> =&gt; "<span class="id">str.w</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", [" ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">src</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_shift_op">string_of_shift_op</a></span> <span class="id">sop</span>) ++ "]"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Pstr_a">Pstr_a</a></span> <span class="id">dst</span> <span class="id">src</span> <span class="id">sop</span> =&gt; "<span class="id">str.w_stk</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", [" ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">src</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_shift_op">string_of_shift_op</a></span> <span class="id">sop</span>) ++ "]"<br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Pudiv">Pudiv</a></span>  <span class="id">dst</span> <span class="id">src</span> <span class="id">rop</span> =&gt; "<span class="id">udiv</span> " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">dst</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">src</span>) ++ ", " ++ (<span class="id"><a href="bpf.jit.PrintThumb.html#string_of_ireg">string_of_ireg</a></span> <span class="id">rop</span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; "<span class="id">not</span> <span class="id">yet</span>"<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="is_thumb">is_thumb</a></span> (<span class="id">ins</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#instruction">instruction</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">ins</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Padd">Padd</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">sop</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Pcmp">Pcmp</a></span> <span class="id">_</span> <span class="id">sop</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Pmov">Pmov</a></span> <span class="id">_</span> <span class="id">sop</span>   =&gt; <span class="kwd">match</span> <span class="id">sop</span> <span class="kwd">with</span> | <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#SOreg">SOreg</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> | <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Pbc">Pbc</a></span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#Pbreg">Pbreg</a></span> <span class="id">_</span>      =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="print_arm32_prog_aux">print_arm32_prog_aux</a></span> (<span class="id">id</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#int">int</a></span>) (<span class="id">pc</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">l</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#instruction">instruction</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">l</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [] =&gt; []<br/>
&nbsp;&nbsp;| <span class="id">hd</span> :: <span class="id">tl</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ins_string</span> := <span class="id"><a href="bpf.jit.PrintThumb.html#print_arm32_instruction">print_arm32_instruction</a></span> <span class="id">hd</span> <span class="id">id</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="bpf.jit.PrintThumb.html#is_thumb">is_thumb</a></span> <span class="id">hd</span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app">List.app</a></span> [((<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.HexString.html#of_Z">of_Z</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">id</span>)) ++ ": " ++ <span class="id">ins_string</span>)%<span class="id">string</span>] (<span class="id">print_arm32_prog_aux</span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Int.add">Int.add</a></span> <span class="id">id</span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 2)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">pc</span>) <span class="id">tl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app">List.app</a></span> [((<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.HexString.html#of_Z">of_Z</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">id</span>)) ++ ": " ++ <span class="id">ins_string</span>)%<span class="id">string</span>] (<span class="id">print_arm32_prog_aux</span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Int.add">Int.add</a></span> <span class="id">id</span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 4)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">pc</span>) <span class="id">tl</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="print_arm32_prog">print_arm32_prog</a></span> (<span class="id">l</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html#instruction">instruction</a></span>) (<span class="id">phyical_start_addr</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#int">int</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="bpf.jit.PrintThumb.html#print_arm32_prog_aux">print_arm32_prog_aux</a></span> <span class="id">phyical_start_addr</span> 0 <span class="id">l</span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
