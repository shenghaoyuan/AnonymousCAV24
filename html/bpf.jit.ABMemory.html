
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module ABMemory</title>
<meta name="description" content="Documentation of Coq module ABMemory" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module ABMemory</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">compcert.lib</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html">Integers</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Maps.html">Maps</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert.arm</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html">ABinSem</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith.html">ZArith</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.micromega.Lia.html">Lia</a></span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">bool_scope</span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">Z_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ab_setN_other">ab_setN_other</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl</span> <span class="id">c</span> <span class="id">p</span> <span class="id">q</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">r</span>, <span class="id">p</span> &lt;= <span class="id">r</span> &lt; <span class="id">p</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">vl</span>) -&gt; <span class="id">r</span> &lt;&gt; <span class="id">q</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">q</span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#setN">setN</a></span> <span class="id">vl</span> <span class="id">p</span> <span class="id">c</span>) = <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">q</span> <span class="id">c</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vl</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="id">length</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">transitivity</span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">q</span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Maps.html#ZMap.set">ZMap.set</a></span> <span class="id">p</span> <span class="id">a</span> <span class="id">c</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHvl</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Maps.html#ZMap.gso">ZMap.gso</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#not_eq_sym">not_eq_sym</a></span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ab_setN_outside">ab_setN_outside</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl</span> <span class="id">c</span> <span class="id">p</span> <span class="id">q</span>,<br/>
&nbsp;&nbsp;<span class="id">q</span> &lt; <span class="id">p</span> \/ <span class="id">q</span> &gt;= <span class="id">p</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">vl</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">q</span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#setN">setN</a></span> <span class="id">vl</span> <span class="id">p</span> <span class="id">c</span>) = <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">q</span> <span class="id">c</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="bpf.jit.ABMemory.html#ab_setN_other">ab_setN_other</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="ab_getN_setN_same">ab_getN_setN_same</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl</span> <span class="id">p</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#getN">getN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">vl</span>) <span class="id">p</span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#setN">setN</a></span> <span class="id">vl</span> <span class="id">p</span> <span class="id">c</span>) = <span class="id">vl</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vl</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="bpf.jit.ABMemory.html#ab_setN_outside">ab_setN_outside</a></span>. <span class="tactic">apply</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Maps.html#ZMap.gss">ZMap.gss</a></span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHvl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ab_getN_exten">ab_getN_exten</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c1</span> <span class="id">c2</span> <span class="id">n</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">p</span> &lt;= <span class="id">i</span> &lt; <span class="id">p</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">n</span> -&gt; <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">i</span> <span class="id">c1</span> = <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">i</span> <span class="id">c2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#getN">getN</a></span> <span class="id">n</span> <span class="id">p</span> <span class="id">c1</span> = <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#getN">getN</a></span> <span class="id">n</span> <span class="id">p</span> <span class="id">c2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>. <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>. <span class="id">lia</span>. <span class="tactic">apply</span> <span class="id">IHn</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ab_getN_setN_disjoint">ab_getN_setN_disjoint</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl</span> <span class="id">q</span> <span class="id">c</span> <span class="id">n</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Intv.html#disjoint">Intv.disjoint</a></span> (<span class="id">p</span>, <span class="id">p</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">n</span>) (<span class="id">q</span>, <span class="id">q</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">vl</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#getN">getN</a></span> <span class="id">n</span> <span class="id">p</span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#setN">setN</a></span> <span class="id">vl</span> <span class="id">q</span> <span class="id">c</span>) = <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#getN">getN</a></span> <span class="id">n</span> <span class="id">p</span> <span class="id">c</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="bpf.jit.ABMemory.html#ab_getN_exten">ab_getN_exten</a></span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="bpf.jit.ABMemory.html#ab_setN_other">ab_setN_other</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">r</span>. <span class="id">eelim</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="ab_getN_setN_outside">ab_getN_setN_outside</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl</span> <span class="id">q</span> <span class="id">c</span> <span class="id">n</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id">p</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">n</span> &lt;= <span class="id">q</span> \/ <span class="id">q</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">vl</span>) &lt;= <span class="id">p</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#getN">getN</a></span> <span class="id">n</span> <span class="id">p</span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#setN">setN</a></span> <span class="id">vl</span> <span class="id">q</span> <span class="id">c</span>) = <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#getN">getN</a></span> <span class="id">n</span> <span class="id">p</span> <span class="id">c</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="bpf.jit.ABMemory.html#ab_getN_setN_disjoint">ab_getN_setN_disjoint</a></span>. <span class="tactic">apply</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Intv.html#disjoint_range">Intv.disjoint_range</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
