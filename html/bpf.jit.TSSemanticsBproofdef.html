
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module TSSemanticsBproofdef</title>
<meta name="description" content="Documentation of Coq module TSSemanticsBproofdef" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module TSSemanticsBproofdef</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">compcert.lib</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html">Integers</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Coqlib.html">Coqlib</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Maps.html">Maps</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert.common</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.AST.html">AST</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html">Values</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html">Memory</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert.arm</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html">AsmSyntax</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html">ABinSem</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinDecode.html">BinDecode</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.BinSyntax.html">BinSyntax</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.Conventions1.html">Conventions1</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.Machregs.html">Machregs</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">bpf.comm</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="bpf.comm.JITCall.html">JITCall</a></span>.<br/>
<span class="kwd">From</span> <span class="id">bpf.rbpf32</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html">TSSyntax</a></span> <span class="id"><a href="bpf.rbpf32.JITConfig.html">JITConfig</a></span> <span class="id"><a href="bpf.rbpf32.TSSemanticsA.html">TSSemanticsA</a></span>.<br/>
<span class="kwd">From</span> <span class="id">bpf.jit</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="bpf.jit.Arm32Reg.html">Arm32Reg</a></span> <span class="id"><a href="bpf.jit.ABMemory.html">ABMemory</a></span> <span class="id"><a href="bpf.jit.ThumbJITProofLemma0.html">ThumbJITProofLemma0</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith.html">ZArith</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.micromega.Lia.html">Lia</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.ListSet.html">ListSet</a></span>.<br/>
<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">nat_scope</span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">asm</span>.<br/>
<span class="kwd">Import</span> <span class="id">ListNotations</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="astate">astate</a></span>: <span class="kwd">Type</span> := <span class="id"><a name="AState">AState</a></span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#aregset">aregset</a></span> -&gt; <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#astack">astack</a></span> -&gt; <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="id">astate</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_regs">match_regs</a></span> (<span class="id">rs</span>: <span class="id"><a href="bpf.rbpf32.TSSyntax.html#regset">regset</a></span>) (<span class="id">ars</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#aregset">aregset</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">ld_set</span> <span class="id">st_set</span>: <span class="id"><a href="bpf.rbpf32.TSSyntax.html#listset">listset</a></span>) (<span class="id">st_blk</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#block">block</a></span>) (<span class="id">m</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#mem">mem</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id">r</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.ListSet.html#set_union">set_union</a></span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#breg_eq">breg_eq</a></span> <span class="id">ld_set</span> <span class="id">st_set</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">vr</span>, <span class="id">rs</span>#<span class="id">r</span> = (<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vint">Vint</a></span> <span class="id">vr</span>)  /\ <span class="id">ars</span> (<span class="id"><a href="bpf.jit.Arm32Reg.html#ireg_of_breg">ireg_of_breg</a></span> <span class="id">r</span>) = <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Cval">Cval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vint">Vint</a></span> <span class="id">vr</span>)) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;((~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id">r</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.ListSet.html#set_union">set_union</a></span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#breg_eq">breg_eq</a></span> <span class="id">ld_set</span> <span class="id">st_set</span>)) /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id">r</span> <span class="id"><a href="bpf.rbpf32.JITConfig.html#rbpf_arm_callee_save">rbpf_arm_callee_save</a></span>  -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ars</span> (<span class="id"><a href="bpf.jit.Arm32Reg.html#ireg_of_breg">ireg_of_breg</a></span> <span class="id">r</span>) = <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Aval">Aval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Rval">Rval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Sreg">Sreg</a></span> (<span class="id"><a href="bpf.jit.Arm32Reg.html#ireg_of_breg">ireg_of_breg</a></span> <span class="id">r</span>)))) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(~(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id">r</span> <span class="id">st_set</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exists</span> <span class="id">vr</span>, <span class="id">rs</span>#<span class="id">r</span> = (<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vint">Vint</a></span> <span class="id">vr</span>) /\ <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">m</span> <span class="id">st_blk</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="bpf.rbpf32.TSSyntax.html#z_of_breg">z_of_breg</a></span> <span class="id">r</span> * 4) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vint">Vint</a></span> <span class="id">vr</span>))<br/>
.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="init_arm_stack">init_arm_stack</a></span> (<span class="id">am</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">astk</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#astack">astack</a></span>) (<span class="id">astkb</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#block">block</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#astack_load">astack_load</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.AST.html#Many32">Many32</a></span> <span class="id">am</span> <span class="id">astk</span> <span class="id">astkb</span> 0%<span class="id">Z</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Aval">Aval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Rval">Rval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Sreg">Sreg</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR13">IR13</a></span>))) /\<br/>
&nbsp;&nbsp;<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">am</span> <span class="id">astkb</span> 0%<span class="id">Z</span> <span class="id"><a href="bpf.comm.JITCall.html#stack_block_size">stack_block_size</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memtype.html#Writable">Writable</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_stack">match_stack</a></span> (<span class="id">ars</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#aregset">aregset</a></span>) (<span class="id">ld_set</span> <span class="id">st_set</span>: <span class="id"><a href="bpf.rbpf32.TSSyntax.html#listset">listset</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">stk</span>:<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#astack">astack</a></span>) (<span class="id">stkb</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#block">block</a></span>) (<span class="id">m</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#mem">mem</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#init_arm_stack">init_arm_stack</a></span> <span class="id">m</span> <span class="id">stk</span> <span class="id">stkb</span> /\<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id">r</span> <span class="id"><a href="bpf.rbpf32.JITConfig.html#rbpf_arm_callee_save">rbpf_arm_callee_save</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id">r</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.ListSet.html#set_union">set_union</a></span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#breg_eq">breg_eq</a></span> <span class="id">ld_set</span> <span class="id">st_set</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#astack_load">astack_load</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.AST.html#Many32">Many32</a></span> <span class="id">m</span> <span class="id">stk</span> <span class="id">stkb</span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#z_of_breg">z_of_breg</a></span> <span class="id">r</span> * 4) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Aval">Aval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Rval">Rval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Sreg">Sreg</a></span> (<span class="id"><a href="bpf.jit.Arm32Reg.html#ireg_of_breg">ireg_of_breg</a></span> <span class="id">r</span>))))) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id">r</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.ListSet.html#set_union">set_union</a></span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#breg_eq">breg_eq</a></span> <span class="id">ld_set</span> <span class="id">st_set</span>) /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id">r</span> <span class="id"><a href="bpf.rbpf32.JITConfig.html#rbpf_arm_callee_save">rbpf_arm_callee_save</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ars</span> (<span class="id"><a href="bpf.jit.Arm32Reg.html#ireg_of_breg">ireg_of_breg</a></span> <span class="id">r</span>)) = (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Aval">Aval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Rval">Rval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Sreg">Sreg</a></span> (<span class="id"><a href="bpf.jit.Arm32Reg.html#ireg_of_breg">ireg_of_breg</a></span> <span class="id">r</span>)))))<br/>
.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_memory">match_memory</a></span> (<span class="id">m0</span> <span class="id">m1</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">jit_blk</span> <span class="id">st_blk</span> <span class="id">stkb</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#block">block</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">_</span> =&gt;  <span class="id">b</span> &lt;&gt; <span class="id">st_blk</span> /\ <span class="id">b</span> &lt;&gt; <span class="id">stkb</span>) <span class="id">m0</span> <span class="id">m1</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_states">match_states</a></span> (<span class="id">jit_blk</span> <span class="id">st_blk</span> : <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#block">block</a></span>) (<span class="id">ld_set</span> <span class="id">st_set</span>: <span class="id"><a href="bpf.rbpf32.TSSyntax.html#listset">listset</a></span>): <span class="id"><a href="bpf.rbpf32.TSSyntax.html#state">state</a></span> -&gt; <span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#astate">astate</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="match_states_intro">match_states_intro</a></span>: <span class="kwd">forall</span> <span class="id">rs</span> (<span class="id">ars</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#aregset">aregset</a></span>) <span class="id">astk</span> <span class="id">astkb</span> <span class="id">m</span> <span class="id">am</span><br/>
&nbsp;&nbsp;(<span class="id">Hfloat</span>: <span class="kwd">forall</span> <span class="id">x</span> : <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.Machregs.html#mreg">mreg</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">x</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.Conventions1.html#float_callee_save_regs">float_callee_save_regs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#aval_eq">aval_eq</a></span> (<span class="id">ars</span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#preg_of">preg_of</a></span> <span class="id">x</span>)) (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Aval">Aval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Rval">Rval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Sreg">Sreg</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#preg_of">preg_of</a></span> <span class="id">x</span>)))) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">BLK</span>: <span class="id">st_blk</span> &lt;&gt; <span class="id">jit_blk</span> /\ <span class="id">st_blk</span> &lt;&gt; <span class="id">astkb</span>)<br/>
&nbsp;&nbsp;(<span class="id">HPERM</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">am</span> <span class="id">st_blk</span> 0%<span class="id">Z</span> <span class="id"><a href="bpf.comm.JITCall.html#state_block_size">state_block_size</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memtype.html#Writable">Writable</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">HNoDup</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> <span class="id">ld_set</span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#NoDup">NoDup</a></span> <span class="id">st_set</span>)<br/>
&nbsp;&nbsp;(<span class="id">HAR0</span>: <span class="id"><a href="bpf.comm.JITCall.html#get_result_bool">get_result_bool</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.AST.html#Tint">AST.Tint</a></span> (<span class="id">ars</span>#<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR0">IR0</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">HAR11</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#astack_load">astack_load</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.AST.html#Many32">Many32</a></span> <span class="id">am</span> <span class="id">astk</span> <span class="id">astkb</span> 44%<span class="id">Z</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Aval">Aval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Rval">Rval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Sreg">Sreg</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR11">IR11</a></span>))))<br/>
&nbsp;&nbsp;(<span class="id">HIR12</span>: <span class="id">ars</span>#<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR12">IR12</a></span> = <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Cval">Cval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">st_blk</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>))<br/>
&nbsp;&nbsp;(<span class="id">HIR13</span>: <span class="id">ars</span>#<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR13">IR13</a></span> = <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Aval">Aval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Sval">Sval</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Ssp">Ssp</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>))<br/>
&nbsp;&nbsp;(<span class="id">HIR14</span>: <span class="id">ars</span>#<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR14">IR14</a></span> = (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Aval">Aval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Sval">Sval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Sreg">Sreg</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#PC">PC</a></span>) (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> 2))))<br/>
&nbsp;&nbsp;(<span class="id">HIRPC</span>: <span class="tactic">exists</span> <span class="id">va_pc</span>, <span class="id">ars</span>#<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#PC">PC</a></span> = <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Cval">Cval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">jit_blk</span> <span class="id">va_pc</span>))<br/>
&nbsp;&nbsp;(<span class="id">HSUB</span>: <span class="kwd">forall</span> <span class="id">r</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id">r</span> <span class="id">st_set</span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id">r</span> <span class="id">ld_set</span>) <span class="docright">(* opt  *)</span><br/>
&nbsp;&nbsp;(<span class="id">REG</span>: <span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#match_regs">match_regs</a></span> <span class="id">rs</span> <span class="id">ars</span> <span class="id">ld_set</span> <span class="id">st_set</span> <span class="id">st_blk</span> <span class="id">am</span>)<br/>
&nbsp;&nbsp;(<span class="id">STK</span>: <span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#match_stack">match_stack</a></span> <span class="id">ars</span> <span class="id">ld_set</span> <span class="id">st_set</span> <span class="id">astk</span> <span class="id">astkb</span> <span class="id">am</span>)<br/>
&nbsp;&nbsp;(<span class="id">MEM</span>: <span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#match_memory">match_memory</a></span> <span class="id">m</span> <span class="id">am</span> <span class="id">jit_blk</span> <span class="id">st_blk</span> <span class="id">astkb</span>)<br/>
&nbsp;&nbsp;,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_states</span> <span class="id">jit_blk</span> <span class="id">st_blk</span> <span class="id">ld_set</span> <span class="id">st_set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="bpf.rbpf32.TSSyntax.html#State">State</a></span> <span class="id">rs</span> <span class="id">m</span>) (<span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#AState">AState</a></span> <span class="id">ars</span> <span class="id">astk</span> <span class="id">astkb</span> <span class="id">am</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="rbpf_arm_callee_save_reg_ge4">rbpf_arm_callee_save_reg_ge4</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">dst</span><br/>
&nbsp;&nbsp;(<span class="id">HD</span> : @<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.ListSet.html#set_In">set_In</a></span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#breg">breg</a></span> <span class="id">dst</span> <span class="id"><a href="bpf.rbpf32.JITConfig.html#rbpf_arm_callee_save">rbpf_arm_callee_save</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(4 &lt;= <span class="id"><a href="bpf.rbpf32.TSSyntax.html#z_of_breg">z_of_breg</a></span> <span class="id">dst</span> * 4)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">HD</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">dst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="tactic">destruct</span> <span class="id">HD</span> <span class="kwd">as</span> [<span class="id">HD</span> | <span class="id">HD</span>]; [<span class="tactic">inversion</span> <span class="id">HD</span> | ]).<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">HD</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">init_arm_stack_update1</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">STK1</span> : @<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#aval">aval</a></span>) (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#astack_load">astack_load</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.AST.html#Many32">Many32</a></span> ?<span class="id">am</span> ?<span class="id">astk0</span> ?<span class="id">astkb</span> 0) <span class="id">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">STK2</span> : <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> ?<span class="id">am</span> ?<span class="id">astkb</span> 0 <span class="id"><a href="bpf.comm.JITCall.html#stack_block_size">stack_block_size</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memtype.html#Writable">Writable</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hdst_callee</span> :@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.ListSet.html#set_In">set_In</a></span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#breg">breg</a></span> ?<span class="id">dst</span> <span class="id"><a href="bpf.rbpf32.JITConfig.html#rbpf_arm_callee_save">rbpf_arm_callee_save</a></span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hastk1_eq</span> : @<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Maps.html#ZMap.t">ZMap.t</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#amemval">amemval</a></span>) ?<span class="id">astk1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#setN">setN</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#encode_sval_fragments">encode_sval_fragments</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Cany32">Cany32</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Rval">Rval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Sreg">Sreg</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.AsmSyntax.html#IR">IR</a></span> (<span class="id"><a href="bpf.jit.Arm32Reg.html#ireg_of_breg">ireg_of_breg</a></span> ?<span class="id">dst</span>))))) <span class="id">_</span> ?<span class="id">astk0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#init_arm_stack">init_arm_stack</a></span> ?<span class="id">am</span> ?<span class="id">astk1</span> ?<span class="id">astkb</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#init_arm_stack">init_arm_stack</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [| <span class="tactic">auto</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">STK1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#astack_load">astack_load</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.valid_access_dec">Mem.valid_access_dec</a></span>; [|<span class="tactic">reflexivity</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">astk1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="bpf.jit.ABMemory.html#ab_getN_setN_outside">ab_getN_setN_outside</a></span>; <span class="tactic">f_equal</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">left</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">Hdst_callee</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#rbpf_arm_callee_save_reg_ge4">rbpf_arm_callee_save_reg_ge4</a></span>; <span class="tactic">auto</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">valid_access_fail_solver</span> := <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">HF</span> : ~ <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.valid_access">Mem.valid_access</a></span> ?<span class="id">am</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.AST.html#Many32">Many32</a></span> ?<span class="id">astkb</span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#z_of_breg">z_of_breg</a></span> ?<span class="id">dst</span> * 4) <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memtype.html#Readable">Readable</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hrange</span> : <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> ?<span class="id">am</span> ?<span class="id">astkb</span> 0 <span class="id"><a href="bpf.comm.JITCall.html#stack_block_size">stack_block_size</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memtype.html#Writable">Writable</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>; <span class="tactic">apply</span> <span class="id">HF</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.valid_access">Mem.valid_access</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [ | <span class="tactic">unfold</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memdata.html#align_chunk">align_chunk</a></span>; <span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_factor_r">Z.divide_factor_r</a></span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">Hrange</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ofs</span> <span class="id">Hofs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span>; <span class="tactic">eauto</span>; [ | <span class="tactic">constructor</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">Hrange</span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.comm.JITCall.html#stack_block_size">stack_block_size</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">Hofs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#z_of_breg">z_of_breg</a></span> <span class="kwd">in</span> <span class="id">Hofs</span>; <span class="tactic">destruct</span> <span class="id">dst</span>; <span class="id">lia</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="aexec_store_ir13">aexec_store_ir13</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">br</span> (<span class="id">ars</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#aregset">aregset</a></span>) <span class="id">astk0</span> <span class="id">astkb</span> <span class="id">am</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hdst_callee</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">br</span> <span class="id"><a href="bpf.rbpf32.JITConfig.html#rbpf_arm_callee_save">rbpf_arm_callee_save</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">REG2</span> : <span class="id">ars</span> (<span class="id"><a href="bpf.jit.Arm32Reg.html#ireg_of_breg">ireg_of_breg</a></span> <span class="id">br</span>) = <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Aval">Aval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Rval">Rval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Sreg">Sreg</a></span> (<span class="id"><a href="bpf.jit.Arm32Reg.html#ireg_of_breg">ireg_of_breg</a></span> <span class="id">br</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INIT_STK</span> : <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">am</span> <span class="id">astkb</span> 0 <span class="id"><a href="bpf.comm.JITCall.html#stack_block_size">stack_block_size</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memtype.html#Writable">Writable</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#aexec_store">aexec_store</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.AST.html#Many32">Many32</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Aval">Aval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Sval">Sval</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Ssp">Ssp</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Ptrofs.of_int">Ptrofs.of_int</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Int.mul">Int.mul</a></span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#int_of_breg">int_of_breg</a></span> <span class="id">br</span>) (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 4))))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="bpf.jit.Arm32Reg.html#ireg_of_breg">ireg_of_breg</a></span> <span class="id">br</span>) <span class="id">ars</span> <span class="id">astk0</span> <span class="id">astkb</span> <span class="id">am</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#ANext">ANext</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#anextinstr">anextinstr</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id">ars</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#setN">setN</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#encode_sval_fragments">encode_sval_fragments</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Cany32">Cany32</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Rval">Rval</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#Sreg">Sreg</a></span> (<span class="id"><a href="bpf.jit.Arm32Reg.html#ireg_of_breg">ireg_of_breg</a></span> <span class="id">br</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="bpf.rbpf32.TSSyntax.html#z_of_breg">z_of_breg</a></span> <span class="id">br</span> * 4) <span class="id">astk0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">astkb</span> <span class="id">am</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#aexec_store">aexec_store</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="bpf.jit.ThumbJITProofLemma0.html#ptr_int_mul_4">ptr_int_mul_4</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#astack_store">astack_store</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.valid_access_dec">Mem.valid_access_dec</a></span> <span class="kwd">as</span> [<span class="id">Hvalid</span> | <span class="id">Hno_valid</span>].<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#encode_aval">encode_aval</a></span>. <span class="docright">(* we need say all initial arm registers have abstract values  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">REG2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.arm.ABinSem.html#encode_sval">encode_sval</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;- <span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hno_valid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">INIT_STK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.valid_access">Mem.valid_access</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memdata.html#size_chunk">size_chunk</a></span>, <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ofs</span> <span class="id">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">INIT_STK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.comm.JITCall.html#stack_block_size">stack_block_size</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">br</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">HIn</span>; <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_factor_r">Z.divide_factor_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="set_add_same">set_add_same</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span>:<span class="kwd">Type</span>} (<span class="id">aeq</span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> : <span class="id">A</span>, {<span class="id">x</span> = <span class="id">y</span>} + {<span class="id">x</span> &lt;&gt; <span class="id">y</span>}) (<span class="id">l</span>: <span class="tactic">set</span> <span class="id">A</span>) (<span class="id">x</span>: <span class="id">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.ListSet.html#set_add">set_add</a></span> <span class="id">aeq</span> <span class="id">x</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.ListSet.html#set_add">set_add</a></span> <span class="id">aeq</span> <span class="id">x</span> <span class="id">l</span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.ListSet.html#set_add">set_add</a></span> <span class="id">aeq</span> <span class="id">x</span> <span class="id">l</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">aeq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">aeq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">aeq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">aeq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">apply</span> <span class="id">n</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">in_solver</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| |- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> ?<span class="id">X</span> ?<span class="id">Y</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">left</span>; <span class="tactic">reflexivity</span>); <span class="tactic">right</span>; <span class="id">in_solver</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="set_mem_arm_callee_save">set_mem_arm_callee_save</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">br</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.ListSet.html#set_mem">set_mem</a></span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#breg_eq">breg_eq</a></span> <span class="id">br</span> <span class="id"><a href="bpf.rbpf32.JITConfig.html#rbpf_arm_callee_save">rbpf_arm_callee_save</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">br</span> <span class="id"><a href="bpf.rbpf32.JITConfig.html#rbpf_arm_callee_save">rbpf_arm_callee_save</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</div>
<div class="proofscript" id="proof4">
 <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.ListSet.html#set_mem_correct1">set_mem_correct1</a></span>; <span class="tactic">eauto</span>. <span class="comment">(*<br/>
&nbsp;&nbsp;unfold&nbsp;set_mem,&nbsp;arm_callee_save,&nbsp;rbpf_arm_callee_save.<br/>
&nbsp;&nbsp;unfold&nbsp;ireg_of_breg.<br/>
&nbsp;&nbsp;intros.<br/>
&nbsp;&nbsp;destruct&nbsp;ireg_eq&nbsp;as&nbsp;[Heq&nbsp;|&nbsp;Heq];&nbsp;[|&nbsp;clear&nbsp;Heq].<br/>
&nbsp;&nbsp;{&nbsp;destruct&nbsp;br;&nbsp;inversion&nbsp;Heq.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;simpl;&nbsp;left;&nbsp;reflexivity.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;destruct&nbsp;ireg_eq&nbsp;as&nbsp;[Heq&nbsp;|&nbsp;Heq];&nbsp;[|&nbsp;clear&nbsp;Heq].<br/>
&nbsp;&nbsp;{&nbsp;destruct&nbsp;br;&nbsp;inversion&nbsp;Heq.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;simpl;&nbsp;do&nbsp;1&nbsp;right;&nbsp;left;&nbsp;reflexivity.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;destruct&nbsp;ireg_eq&nbsp;as&nbsp;[Heq&nbsp;|&nbsp;Heq];&nbsp;[|&nbsp;clear&nbsp;Heq].<br/>
&nbsp;&nbsp;{&nbsp;destruct&nbsp;br;&nbsp;inversion&nbsp;Heq.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;simpl;&nbsp;do&nbsp;2&nbsp;right;&nbsp;left;&nbsp;reflexivity.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;destruct&nbsp;ireg_eq&nbsp;as&nbsp;[Heq&nbsp;|&nbsp;Heq];&nbsp;[|&nbsp;clear&nbsp;Heq].<br/>
&nbsp;&nbsp;{&nbsp;destruct&nbsp;br;&nbsp;inversion&nbsp;Heq.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;simpl;&nbsp;do&nbsp;3&nbsp;right;&nbsp;left;&nbsp;reflexivity.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;destruct&nbsp;ireg_eq&nbsp;as&nbsp;[Heq&nbsp;|&nbsp;Heq];&nbsp;[|&nbsp;clear&nbsp;Heq].<br/>
&nbsp;&nbsp;{&nbsp;destruct&nbsp;br;&nbsp;inversion&nbsp;Heq.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;simpl;&nbsp;do&nbsp;4&nbsp;right;&nbsp;left;&nbsp;reflexivity.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;destruct&nbsp;ireg_eq&nbsp;as&nbsp;[Heq&nbsp;|&nbsp;Heq];&nbsp;[|&nbsp;clear&nbsp;Heq].<br/>
&nbsp;&nbsp;{&nbsp;destruct&nbsp;br;&nbsp;inversion&nbsp;Heq.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;simpl;&nbsp;do&nbsp;5&nbsp;right;&nbsp;left;&nbsp;reflexivity.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;destruct&nbsp;ireg_eq&nbsp;as&nbsp;[Heq&nbsp;|&nbsp;Heq];&nbsp;[|&nbsp;clear&nbsp;Heq].<br/>
&nbsp;&nbsp;{&nbsp;destruct&nbsp;br;&nbsp;inversion&nbsp;Heq.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;simpl;&nbsp;do&nbsp;6&nbsp;right;&nbsp;left;&nbsp;reflexivity.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;destruct&nbsp;ireg_eq&nbsp;as&nbsp;[Heq&nbsp;|&nbsp;Heq];&nbsp;[|&nbsp;clear&nbsp;Heq].<br/>
&nbsp;&nbsp;{&nbsp;destruct&nbsp;br;&nbsp;inversion&nbsp;Heq.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;inversion&nbsp;H.&nbsp;*)</span><br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="set_mem_arm_callee_save_false">set_mem_arm_callee_save_false</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">br</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.ListSet.html#set_mem">set_mem</a></span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#breg_eq">breg_eq</a></span> <span class="id">br</span> <span class="id"><a href="bpf.rbpf32.JITConfig.html#rbpf_arm_callee_save">rbpf_arm_callee_save</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">br</span> <span class="id"><a href="bpf.rbpf32.JITConfig.html#rbpf_arm_callee_save">rbpf_arm_callee_save</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.ListSet.html#set_mem_complete1">set_mem_complete1</a></span>; <span class="tactic">eauto</span>. <span class="comment">(*<br/>
&nbsp;&nbsp;intro&nbsp;HF.<br/>
&nbsp;&nbsp;apply&nbsp;set_mem_complete1&nbsp;in&nbsp;H.<br/>
&nbsp;&nbsp;apply&nbsp;H.<br/>
&nbsp;&nbsp;unfold&nbsp;set_In.<br/>
&nbsp;&nbsp;unfold&nbsp;rbpf_arm_callee_save,&nbsp;arm_callee_save&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;clear&nbsp;H;&nbsp;simpl&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;do&nbsp;5&nbsp;(destruct&nbsp;HF&nbsp;as&nbsp;[HF&nbsp;|&nbsp;HF];&nbsp;[rewrite&nbsp;&lt;-&nbsp;HF;&nbsp;auto&nbsp;|&nbsp;]).<br/>
&nbsp;&nbsp;do&nbsp;4&nbsp;right;&nbsp;left;&nbsp;reflexivity.<br/>
&nbsp;&nbsp;destruct&nbsp;HF&nbsp;as&nbsp;[HF&nbsp;|&nbsp;HF];&nbsp;[&nbsp;rewrite&nbsp;&lt;-&nbsp;HF;&nbsp;do&nbsp;5&nbsp;right;&nbsp;left;&nbsp;reflexivity&nbsp;|&nbsp;].<br/>
&nbsp;&nbsp;destruct&nbsp;HF&nbsp;as&nbsp;[HF&nbsp;|&nbsp;HF];&nbsp;[&nbsp;rewrite&nbsp;&lt;-&nbsp;HF;&nbsp;do&nbsp;6&nbsp;right;&nbsp;left;&nbsp;reflexivity&nbsp;|&nbsp;].<br/>
&nbsp;&nbsp;inversion&nbsp;HF.&nbsp;*)</span><br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="exec_alu32_list_same_mem">exec_alu32_list_same_mem</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">rs1</span> <span class="id">m1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="bpf.rbpf32.TSSyntax.html#exec_alu32_list">exec_alu32_list</a></span> <span class="id">l</span> <span class="id">rs</span> <span class="id">m</span> = <span class="kwd">Next</span> <span class="id">rs1</span> <span class="id">m1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m</span> = <span class="id">m1</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#exec_alu32">exec_alu32</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#eval_alu32">eval_alu32</a></span>; <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">IHl</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="exec_alu32_list_change_mem">exec_alu32_list_change_mem</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">rs1</span> <span class="id">m1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="bpf.rbpf32.TSSyntax.html#exec_alu32_list">exec_alu32_list</a></span> <span class="id">l</span> <span class="id">rs</span> <span class="id">m</span> = <span class="kwd">Next</span> <span class="id">rs1</span> <span class="id">m</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="bpf.rbpf32.TSSyntax.html#exec_alu32_list">exec_alu32_list</a></span> <span class="id">l</span> <span class="id">rs</span> <span class="id">m1</span> = <span class="kwd">Next</span> <span class="id">rs1</span> <span class="id">m1</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#exec_alu32">exec_alu32</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#eval_alu32">eval_alu32</a></span>; <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">clear</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">IHl</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">m1</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="reg_inv">reg_inv</a></span> (<span class="id">st</span>: <span class="id"><a href="bpf.rbpf32.TSSyntax.html#state">state</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">st</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="bpf.rbpf32.TSSyntax.html#State">State</a></span> <span class="id">rs</span> <span class="id">_</span> =&gt; <span class="kwd">forall</span> <span class="id">r</span>, <span class="tactic">exists</span> <span class="id">vi</span>, <span class="id">rs</span>#<span class="id">r</span> = <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vint">Vint</a></span> <span class="id">vi</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="exec_alu32_reg_inv">exec_alu32_reg_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">op</span> <span class="id">dst</span> <span class="id">src</span> <span class="id">rs0</span> <span class="id">m0</span> <span class="id">rs1</span> <span class="id">m1</span><br/>
&nbsp;&nbsp;(<span class="id">Hexe_one</span> : <span class="id"><a href="bpf.rbpf32.TSSyntax.html#exec_alu32">exec_alu32</a></span> <span class="id">op</span> <span class="id">dst</span> <span class="id">src</span> <span class="id">rs0</span> <span class="id">m0</span> = <span class="kwd">Next</span> <span class="id">rs1</span> <span class="id">m1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">HREG_INV</span>: <span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#reg_inv">reg_inv</a></span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#State">State</a></span> <span class="id">rs0</span> <span class="id">m0</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#reg_inv">reg_inv</a></span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#State">State</a></span> <span class="id">rs1</span> <span class="id">m1</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#exec_alu32">exec_alu32</a></span>, <span class="id"><a href="bpf.rbpf32.TSSyntax.html#eval_alu32">eval_alu32</a></span>, <span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#reg_inv">reg_inv</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#nextinstr">nextinstr</a></span>, <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Val.add">Val.add</a></span>, <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vone">Vone</a></span> <span class="kwd">in</span> <span class="id">Hexe_one</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">H</span>: <span class="kwd">match</span> ?<span class="id">C</span> <span class="kwd">with</span> | <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> =&gt; <span class="id">_</span> | <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> = <span class="id">_</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">C</span>; [| <span class="tactic">inversion</span> <span class="id">H</span>]<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">inversion</span> <span class="id">Hexe_one</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">HREG_INV</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPC">BPC</a></span>) <span class="kwd">as</span> <span class="id">HPC_eq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">HPC_eq</span> <span class="kwd">as</span> (<span class="id">v_pc</span> &amp; <span class="id">HPC_eq</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#bpreg_eq">bpreg_eq</a></span> <span class="id">dst</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPC">BPC</a></span>) <span class="kwd">as</span> [<span class="id">Heq_PC</span> | <span class="id">Hneq_PC</span>] <span class="id">eqn</span>: <span class="id">HPC</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id">Heq_PC</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gss">BPregmap.gss</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#bpreg_eq">bpreg_eq</a></span> <span class="id">r</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPC">BPC</a></span>) <span class="kwd">as</span> [<span class="id">Heq_PC0</span> | <span class="id">Hneq_PC0</span>] <span class="id">eqn</span>: <span class="id">HPC0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id">Heq_PC0</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gss">BPregmap.gss</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">erewrite</span> ! <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gso">BPregmap.gso</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#bpreg_eq">bpreg_eq</a></span> <span class="id">r</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPC">BPC</a></span>) <span class="kwd">as</span> [<span class="id">Heq_PC0</span> | <span class="id">Hneq_PC0</span>] <span class="id">eqn</span>: <span class="id">HPC0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id">Heq_PC0</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gss">BPregmap.gss</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gso">BPregmap.gso</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">HPC_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gso">BPregmap.gso</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#bpreg_eq">bpreg_eq</a></span> <span class="id">r</span> <span class="id">dst</span>) <span class="kwd">as</span> [<span class="id">Heq_PC1</span> | <span class="id">Hneq_PC1</span>] <span class="id">eqn</span>: <span class="id">HPC1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">Heq_PC1</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gss">BPregmap.gss</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">erewrite</span> ! <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gso">BPregmap.gso</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="exec_alu32_list_reg_inv">exec_alu32_list_reg_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">rs0</span> <span class="id">m0</span> <span class="id">rs1</span> <span class="id">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">HL</span>: <span class="id"><a href="bpf.rbpf32.TSSyntax.html#exec_alu32_list">exec_alu32_list</a></span> <span class="id">l</span> <span class="id">rs0</span> <span class="id">m0</span> = <span class="kwd">Next</span> <span class="id">rs1</span> <span class="id">m1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">HREG_INV</span>: <span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#reg_inv">reg_inv</a></span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#State">State</a></span> <span class="id">rs0</span> <span class="id">m0</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#reg_inv">reg_inv</a></span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#State">State</a></span> <span class="id">rs1</span> <span class="id">m1</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#reg_inv">reg_inv</a></span>; <span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">HL</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">HREG_INV</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [| | <span class="id">op</span> <span class="id">dst</span> <span class="id">src</span> | | | | ]; <span class="tactic">inversion</span> <span class="id">HL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#exec_alu32">exec_alu32</a></span> <span class="kwd">as</span> [<span class="id">rsk</span> <span class="id">mk</span> | ] <span class="id">eqn</span>: <span class="id">Hexe_one</span>; [| <span class="tactic">inversion</span> <span class="id">HL</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#exec_alu32_reg_inv">exec_alu32_reg_inv</a></span> <span class="kwd">in</span> <span class="id">Hexe_one</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">unfold</span> <span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#reg_inv">reg_inv</a></span>; <span class="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHl</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="astep_reg_inv">astep_reg_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">bpf_get_call</span> <span class="id">mem_map</span> <span class="id">c</span> <span class="id">kl</span> <span class="id">ge</span> <span class="id">m0</span> <span class="id">t</span> (<span class="id">rs0</span> <span class="id">rs1</span>: <span class="id"><a href="bpf.rbpf32.TSSyntax.html#regset">regset</a></span>) <span class="id">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">HSTEP</span>: <span class="id"><a href="bpf.rbpf32.TSSemanticsA.html#astep">astep</a></span> <span class="id">bpf_get_call</span> <span class="id">mem_map</span> <span class="id">c</span> <span class="id">kl</span> <span class="id">ge</span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#State">State</a></span> <span class="id">rs0</span> <span class="id">m0</span>) <span class="id">t</span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#State">State</a></span> <span class="id">rs1</span> <span class="id">m1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">HREG_INV</span>: <span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#reg_inv">reg_inv</a></span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#State">State</a></span> <span class="id">rs0</span> <span class="id">m0</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#reg_inv">reg_inv</a></span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#State">State</a></span> <span class="id">rs1</span> <span class="id">m1</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">unfold</span> <span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#reg_inv">reg_inv</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="bpf.jit.TSSemanticsBproofdef.html#exec_alu32_list_reg_inv">exec_alu32_list_reg_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#goto_label">goto_label</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(Pos.to_nat&nbsp;_&nbsp;&lt;=?&nbsp;_);&nbsp;[|&nbsp;inversion&nbsp;H1].&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">Heq</span> <span class="id">Heqm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">m</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">HREG_INV</span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">HREG_INV</span> <span class="kwd">as</span> (<span class="id">vi</span> &amp; <span class="id">HREG_INV</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#bpreg_eq">bpreg_eq</a></span> <span class="id">r</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPC">BPC</a></span>) <span class="kwd">as</span> [<span class="id">Heq_PC</span> | <span class="id">Hneq_PC</span>] <span class="id">eqn</span>: <span class="id">HPC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">subst</span> <span class="id">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gss">BPregmap.gss</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exists</span> <span class="id">vi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gso">BPregmap.gso</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#exec_branch">exec_branch</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#eval_cmp">eval_cmp</a></span>; [| <span class="tactic">inversion</span> <span class="id">H1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#goto_label">goto_label</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(Pos.to_nat&nbsp;_&nbsp;&lt;=?&nbsp;_);&nbsp;[|&nbsp;inversion&nbsp;H1].&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">Heq</span> <span class="id">Heqm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">m</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">HREG_INV</span> <span class="id">r0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">HREG_INV</span> <span class="kwd">as</span> (<span class="id">vi</span> &amp; <span class="id">HREG_INV</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#bpreg_eq">bpreg_eq</a></span> <span class="id">r0</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPC">BPC</a></span>) <span class="kwd">as</span> [<span class="id">Heq_PC</span> | <span class="id">Hneq_PC</span>] <span class="id">eqn</span>: <span class="id">HPC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">subst</span> <span class="id">r0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gss">BPregmap.gss</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">exists</span> <span class="id">vi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gso">BPregmap.gso</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">injection</span> <span class="id">H1</span> <span class="kwd">as</span> <span class="id">Heq</span> <span class="id">Heqm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">m</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">HREG_INV</span> <span class="id">r0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">HREG_INV</span> <span class="kwd">as</span> (<span class="id">vi</span> &amp; <span class="id">HREG_INV</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#nextinstr">nextinstr</a></span>, <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Val.add">Val.add</a></span>, <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vone">Vone</a></span> <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#bpreg_eq">bpreg_eq</a></span> <span class="id">r0</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPC">BPC</a></span>) <span class="kwd">as</span> [<span class="id">Heq_PC</span> | <span class="id">Hneq_PC</span>] <span class="id">eqn</span>: <span class="id">HPC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">subst</span> <span class="id">r0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gss">BPregmap.gss</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">HREG_INV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">exists</span> <span class="id">vi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gso">BPregmap.gso</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#exec_load">exec_load</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="kwd">as</span> [<span class="id">v_ld</span> |]; [| <span class="tactic">inversion</span> <span class="id">H3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#nextinstr">nextinstr</a></span>, <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Val.add">Val.add</a></span>, <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vone">Vone</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v_ld</span>; <span class="tactic">inversion</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">HREG_INV</span> <span class="id">r0</span>) <span class="kwd">as</span> <span class="id">Hreg0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hreg0</span> <span class="kwd">as</span> (<span class="id">vi0</span> &amp; <span class="id">Hreg0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">HREG_INV</span> <span class="id">r</span>) <span class="kwd">as</span> <span class="id">Hreg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hreg</span> <span class="kwd">as</span> (<span class="id">vi</span> &amp; <span class="id">Hreg</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#bpreg_eq">bpreg_eq</a></span> <span class="id">r0</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPC">BPC</a></span>) <span class="kwd">as</span> [<span class="id">Heq_PC0</span> | <span class="id">Hneq_PC0</span>] <span class="id">eqn</span>: <span class="id">HPC0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">subst</span> <span class="id">r0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gss">BPregmap.gss</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#bpreg_eq">bpreg_eq</a></span> <span class="id">r</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPC">BPC</a></span>) <span class="kwd">as</span> [<span class="id">Heq_PC</span> | <span class="id">Hneq_PC</span>] <span class="id">eqn</span>: <span class="id">HPC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id">Heq_PC</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gss">BPregmap.gss</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gso">BPregmap.gso</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hreg0</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gso">BPregmap.gso</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#bpreg_eq">bpreg_eq</a></span> <span class="id">r</span> <span class="id">r0</span>) <span class="kwd">as</span> [<span class="id">Heq_PC</span> | <span class="id">Hneq_PC</span>] <span class="id">eqn</span>: <span class="id">HPC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id">Heq_PC</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gss">BPregmap.gss</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gso">BPregmap.gso</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#exec_store">exec_store</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.storev">Mem.storev</a></span> <span class="kwd">as</span> [<span class="id">m_st</span> |]; [| <span class="tactic">inversion</span> <span class="id">H3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#nextinstr">nextinstr</a></span>, <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Val.add">Val.add</a></span>, <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vone">Vone</a></span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id">H3</span> <span class="kwd">as</span> <span class="id">Heq</span> <span class="id">Heqm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">HREG_INV</span> <span class="id">r0</span>) <span class="kwd">as</span> <span class="id">Hreg0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hreg0</span> <span class="kwd">as</span> (<span class="id">vi0</span> &amp; <span class="id">Hreg0</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#bpreg_eq">bpreg_eq</a></span> <span class="id">r0</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPC">BPC</a></span>) <span class="kwd">as</span> [<span class="id">Heq_PC</span> | <span class="id">Hneq_PC</span>] <span class="id">eqn</span>: <span class="id">HPC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">subst</span> <span class="id">r0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gss">BPregmap.gss</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gso">BPregmap.gso</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#nextinstr">nextinstr</a></span>, <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Val.add">Val.add</a></span>, <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vone">Vone</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gso">BPregmap.gso</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="tactic">intro</span> <span class="id">HF</span>; <span class="tactic">inversion</span> <span class="id">HF</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">specialize</span> (<span class="id">HREG_INV</span> <span class="id">r</span>) <span class="kwd">as</span> <span class="id">Hreg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hreg</span> <span class="kwd">as</span> (<span class="id">vi</span> &amp; <span class="id">Hreg</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#bpreg_eq">bpreg_eq</a></span> <span class="id">r</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPC">BPC</a></span>) <span class="kwd">as</span> [<span class="id">Heq_PC</span> | <span class="id">Hneq_PC</span>] <span class="id">eqn</span>: <span class="id">HPC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">subst</span> <span class="id">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gss">BPregmap.gss</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gso">BPregmap.gso</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="bpf.rbpf32.TSSyntax.html#bpreg_eq">bpreg_eq</a></span> <span class="id">r</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#R0">R0</a></span>) <span class="kwd">as</span> [<span class="id">Heq_PC0</span> | <span class="id">Hneq_PC0</span>] <span class="id">eqn</span>: <span class="id">HPC0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id">Heq_PC0</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gss">BPregmap.gss</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">erewrite</span> <span class="id"><a href="bpf.rbpf32.TSSyntax.html#BPregmap.gso">BPregmap.gso</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
